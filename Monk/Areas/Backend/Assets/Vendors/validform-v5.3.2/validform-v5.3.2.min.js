(function(n,t,i){function h(t,i){var u=(n(window).width()-t.outerWidth())/2,r=(n(window).height()-t.outerHeight())/2,r=(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)+(r>0?r:0);t.css({left:u}).animate({top:r},{duration:i,queue:!1})}function s(){if(n("#Validform_msg").length!==0)return!1;f=n('<div id="Validform_msg"><div class="Validform_title">'+u.tit+'<a class="Validform_close" href="javascript:void(0);">&chi;<\/a><\/div><div class="Validform_info"><\/div><div class="iframe"><iframe frameborder="0" scrolling="no" height="100%" width="100%"><\/iframe><\/div><\/div>').appendTo("body");f.find("a.Validform_close").click(function(){return f.hide(),o=!0,e&&e.focus().addClass("Validform_error"),!1}).focus(function(){this.blur()});n(window).bind("scroll resize",function(){o||h(f,400)})}var e=null,f=null,o=!0,u={tit:"提示信息",w:{"*":"不能为空！","*6-16":"请填写6到16位任意字符！",n:"请填写数字！","n6-16":"请填写6到16位数字！",s:"不能输入特殊字符！","s6-18":"请填写6到18位字符！",p:"请填写邮政编码！",m:"请填写手机号码！",e:"邮箱地址格式不对！",url:"请填写网址！",date:"请填写日期！",zh:"请填写中文！",dword:"请填写双字节字符！",money:"请填写货币值！",ipv4:"请填写ip地址！",ipv6:"请填写IPv6地址！",num:"请填写数值！",qq:"请填写QQ号码！",unequal:"值不能相等！",notvalued:"不能含有特定值！",idcard:"身份证号码不对！",time:"请输入时间格式",t:"请输入固话",tm:"请输入手机或固话",video:"请输入视频文件",flash:"请输入flash文件",mp3:"请输入mp3文件",doc:"请输入文档文件",img:"请输入图片格式文件",zip:"请输入压缩包格式文件",md5:"请输入md5码字符串",ascii:"请输入ascii码字符串",color:"请输入十六进制颜色字符串",ens:"请输入纯小写字母",enb:"请输入纯大写字母",age:"请输入正确的年龄",cname:"请输入正确的中文名称",ename:"请输入正确的英文名称",pn:"请输入正确的正数",upn:"请输入正确的负数"},def:"请填写正确信息！",undef:"datatype未定义！",reck:"两次输入的内容不一致！",r:"通过信息验证！",c:"正在检测信息…",s:"请{填写|选择}{0|信息}！",v:"所填信息没有经过验证，请稍后…",p:"正在提交数据…"},r;n.Tipmsg=u;r=function(t,u,f){var u=n.extend({},r.defaults,u),e;if(u.datatype&&n.extend(r.util.dataType,u.datatype),e=this,e.tipmsg={w:{}},e.forms=t,e.objects=[],f===!0)return!1;t.each(function(){var f,t;if(this.validform_inited=="inited")return!0;this.validform_inited="inited";f=this;f.settings=n.extend({},u);t=n(f);f.validform_status="normal";t.data("tipmsg",e.tipmsg);t.delegate("[datatype]","blur",function(){var n=arguments[1];r.util.check.call(this,t,n)});t.delegate(":text","keypress",function(n){n.keyCode==13&&t.find(":submit").length==0&&t.submit()});r.util.enhance.call(t,f.settings.tiptype,f.settings.usePlugin,f.settings.tipSweep);f.settings.btnSubmit&&t.find(f.settings.btnSubmit).bind("click",function(){return t.trigger("submit"),!1});t.submit(function(){var n=r.util.submitForm.call(t,f.settings);return n===i&&(n=!0),n});t.find("[type='reset']").add(t.find(f.settings.btnReset)).bind("click",function(){r.util.resetForm.call(t)})});(u.tiptype==1||(u.tiptype==2||u.tiptype==3)&&u.ajaxPost)&&s()};r.defaults={tiptype:1,tipSweep:!1,showAllError:!1,postonce:!1,ajaxPost:!1};r.util={dataType:{"*":/[\w\W]+/,"*6-16":/^[\w\W]{6,16}$/,n:/^\d+$/,"n6-16":/^\d{6,16}$/,s:/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]+$/,"s6-18":/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]{6,18}$/,p:/^[0-9]{6}$/,m:/^13[0-9]{9}$|14[0-9]{9}|15[0-9]{9}$|18[0-9]{9}$/,e:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,url:/^(\w+:\/\/)?\w+(\.\w+)+.*$/,date:/^(?:(?:1[6-9]|[2-9][0-9])[0-9]{2}([-/.]?)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:(?:1[6-9]|[2-9][0-9])(?:0[48]|[2468][048]|[13579][26])|(?:16|[2468][048]|[3579][26])00)([-/.]?)0?2\2(?:29))(\s+([01][0-9]:|2[0-3]:)?[0-5][0-9]:[0-5][0-9])?$/,zh:/^[\u4e00-\u9fa5]+$/,dword:/^[^\x00-\xff]+$/,money:/^(([0-9]|([1-9][0-9]{0,9}))((\.[0-9]{1,2})?))$/,ipv4:/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,num:/^(\d+[\s,]*)+\.?\d*$/,qq:/^[1-9][0-9]{4,}$/,unequal:function(t,i,r){var u=n.trim(i.attr("with")),f=r.find(u+",[name='"+u+"']").val()||u;if(t==n.trim(f))return!1},notvalued:function(t,i,r){var u=n.trim(i.attr("with")),f=r.find(u+",[name='"+u+"']").val()||u;if(t.indexOf(n.trim(f))!=-1)return!1},min:function(n,t,i){var r=~~t.attr("min")||2,u=i.find("input[name='"+t.attr("name")+"']:checked").length;return u>=r?!0:"请至少选择"+r+"项！"},max:function(n,t,i){var r=~~t.attr("max")||2,u=i.find("input[name='"+t.attr("name")+"']:checked").length;return u==0?!1:u>r?"最多只能选择"+r+"项！":!0},byterange:function(n,t){var i=~~t.attr("max")||1e8,r=~~t.attr("min")||0;return(getslen=n.replace(/[^\x00-\xff]/g,"00").length,getslen>i)?"输入字符不能多于"+i+"个，中文算两个字符！":getslen<r?"输入字符不能少于"+r+"个，中文算两个字符！":!0},numrange:function(n,t){var i=~~t.attr("max")||1e8,r=~~t.attr("min")||0;return(n=n.replace(/\s*/g,"").replace(/,/g,""),!/^\d+\.?\d*$/.test(n))?"只能输入数字！":n<r?"值不能小于"+r+"！":n>i?"值不能大于"+i+"！":!0},daterange:function(n,t){var i=new Date(t.attr("max").replace(/[-\.,]/g,"/")),r=new Date(t.attr("min").replace(/[-\.,]/g,"/")),n=new Date(n.replace(/[-\.,]/g,"/"));return n.getDate()?n>i?"日期不能大于"+t.attr("max"):n<r?"日期不能小于"+t.attr("min"):!0:"日期格式不对！"},idcard:function(n){function u(n){var u=0,t;for(n[17].toLowerCase()=="x"&&(n[17]=10),t=0;t<17;t++)u+=i[t]*n[t];return(valCodePosition=u%11,n[17]==r[valCodePosition])?!0:!1}function f(n){var i=n.substring(6,10),r=n.substring(10,12),u=n.substring(12,14),t=new Date(i,parseFloat(r)-1,parseFloat(u));return t.getFullYear()!=parseFloat(i)||t.getMonth()!=parseFloat(r)-1||t.getDate()!=parseFloat(u)?!1:!0}function e(n){var i=n.substring(6,8),r=n.substring(8,10),u=n.substring(10,12),t=new Date(i,parseFloat(r)-1,parseFloat(u));return t.getYear()!=parseFloat(i)||t.getMonth()!=parseFloat(r)-1||t.getDate()!=parseFloat(u)?!1:!0}var i=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],r=[1,0,10,9,8,7,6,5,4,3,2],t;return n.length==15?e(n):n.length==18?(t=n.split(""),f(n)&&u(t))?!0:!1:!1},time:/^(\d{1,2})(:)?(\d{1,2})\2(\d{1,2})$/,t:/(^[0-9]{3,4}\-[0-9]{3,8}$)|(^[0-9]{3,8}$)|(^\([0-9]{3,4}\)[0-9]{3,8}$)|(^0{0,1}13[0-9]{9}$)/,tm:/((15)\d{9})|((13)\d{9})|((18)\d{9})|(0[1-9]{2,3}\-?[1-9]{6,7})/i,video:/(.*)\.(rm|rmvb|wmv|avi|mp4|3gp|mkv)$/,flash:/(.*)\.(swf|fla|flv)$/,mp3:/(.*)\.(mp3)$/,doc:/(.*)\.(doc|xls|docx|xlsx|pdf)$/,img:/(.*)\.(jpg|gif|ico|jpeg|png)$/,zip:/(.*)\.(rar|zip|7zip|tgz)$/,md5:/^([a-fA-F0-9]{32})$/,ascii:/^[\x00-\xFF]+$/,color:/^#[0-9a-fA-F]{6}$/,ens:/^[a-z]+$/,enb:/^[A-Z]+$/,age:/^[1-99]?\d*$/,cname:/^[\u0391-\uFFE5]{2,15}$/,ename:/^[A-Za-z]{1,161}$/,pn:/^[+]?\d+(\.\d+)?$/,upn:/^-[1-9]\d*\.\d*|-0\.\d*[1-9]\d*$/},toString:Object.prototype.toString,isEmpty:function(t){return t===""||t===n.trim(this.attr("tip"))},getValue:function(t){var u,f=this;return t.is(":radio")?(u=f.find(":radio[name='"+t.attr("name")+"']:checked").val(),u=u===i?"":u):t.is(":checkbox")?(u="",f.find(":checkbox[name='"+t.attr("name")+"']:checked").each(function(){u+=n(this).val()+","}),u=u===i?"":u):u=t.val(),u=n.trim(u),r.util.isEmpty.call(t,u)?"":u},enhance:function(t,i,u,f){var e=this;e.find("[datatype]").each(function(){t==2?n(this).parent().next().find(".Validform_checktip").length==0&&(n(this).parent().next().append("<span class='Validform_checktip' />"),n(this).siblings(".Validform_checktip").remove()):(t==3||t==4)&&n(this).siblings(".Validform_checktip").length==0&&(n(this).parent().append("<span class='Validform_checktip' />"),n(this).parent().next().find(".Validform_checktip").remove())});e.find("input[recheck]").each(function(){if(this.validform_inited=="inited")return!0;this.validform_inited="inited";var t=n(this),i=e.find("input[name='"+n(this).attr("recheck")+"']");i.bind("keyup",function(){if(i.val()==t.val()&&i.val()!=""){if(i.attr("tip")&&i.attr("tip")==i.val())return!1;t.trigger("blur")}}).bind("blur",function(){if(i.val()!=t.val()&&t.val()!=""){if(t.attr("tip")&&t.attr("tip")==t.val())return!1;t.trigger("blur")}})});e.find("[tip]").each(function(){if(this.validform_inited=="inited")return!0;this.validform_inited="inited";var i=n(this).attr("tip"),t=n(this).attr("altercss");n(this).focus(function(){n(this).val()==i&&(n(this).val(""),t&&n(this).removeClass(t))}).blur(function(){n.trim(n(this).val())===""&&(n(this).val(i),t&&n(this).addClass(t))})});e.find(":checkbox[datatype],:radio[datatype]").each(function(){if(this.validform_inited=="inited")return!0;this.validform_inited="inited";var t=n(this),i=t.attr("name");e.find("[name='"+i+"']").filter(":checkbox,:radio").bind("click",function(){setTimeout(function(){t.trigger("blur")},0)})});e.find("select[datatype][multiple]").bind("click",function(){var t=n(this);setTimeout(function(){t.trigger("blur")},0)});r.util.usePlugin.call(e,i,t,u,f)},usePlugin:function(t,i,u,f){var e=this,t=t||{},o;if(e.find("input[plugin='swfupload']").length&&typeof swfuploadhandler!="undefined"&&(o={custom_settings:{form:e,showmsg:function(n,t){r.util.showmsg.call(e,n,i,{obj:e.find("input[plugin='swfupload']"),type:t,sweep:u})}}},o=n.extend(!0,{},t.swfupload,o),e.find("input[plugin='swfupload']").each(function(t){if(this.validform_inited=="inited")return!0;this.validform_inited="inited";n(this).val("");swfuploadhandler.init(o,t)})),e.find("input[plugin='datepicker']").length&&n.fn.datePicker&&(t.datepicker=t.datepicker||{},t.datepicker.format&&(Date.format=t.datepicker.format,delete t.datepicker.format),t.datepicker.firstDayOfWeek&&(Date.firstDayOfWeek=t.datepicker.firstDayOfWeek,delete t.datepicker.firstDayOfWeek),e.find("input[plugin='datepicker']").each(function(){if(this.validform_inited=="inited")return!0;this.validform_inited="inited";t.datepicker.callback&&n(this).bind("dateSelected",function(){var i=new Date(n.event._dpCache[this._dpId].getSelected()[0]).asString(Date.format);t.datepicker.callback(i,this)});n(this).datePicker(t.datepicker)})),e.find("input[plugin*='passwordStrength']").length&&n.fn.passwordStrength&&(t.passwordstrength=t.passwordstrength||{},t.passwordstrength.showmsg=function(n,t,f){r.util.showmsg.call(e,t,i,{obj:n,type:f,sweep:u})},e.find("input[plugin='passwordStrength']").each(function(){if(this.validform_inited=="inited")return!0;this.validform_inited="inited";n(this).passwordStrength(t.passwordstrength)})),f!="addRule"&&t.jqtransform&&n.fn.jqTransSelect){if(e[0].jqTransSelected=="true")return;e[0].jqTransSelected="true";var s=function(t){var i=n(".jqTransformSelectWrapper ul:visible");i.each(function(){var i=n(this).parents(".jqTransformSelectWrapper:first").find("select").get(0);t&&i.oLabel&&i.oLabel.get(0)==t.get(0)||n(this).hide()})},h=function(t){n(t.target).parents(".jqTransformSelectWrapper").length===0&&s(n(t.target))},c=function(){n(document).mousedown(h)};t.jqtransform.selector?(e.find(t.jqtransform.selector).filter('input:submit, input:reset, input[type="button"]').jqTransInputButton(),e.find(t.jqtransform.selector).filter("input:text, input:password").jqTransInputText(),e.find(t.jqtransform.selector).filter("input:checkbox").jqTransCheckBox(),e.find(t.jqtransform.selector).filter("input:radio").jqTransRadio(),e.find(t.jqtransform.selector).filter("textarea").jqTransTextarea(),e.find(t.jqtransform.selector).filter("select").length>0&&(e.find(t.jqtransform.selector).filter("select").jqTransSelect(),c())):e.jqTransform();e.find(".jqTransformSelectWrapper").find("li a").click(function(){n(this).parents(".jqTransformSelectWrapper").find("select").trigger("blur")})}},getNullmsg:function(n){var r=this,f=/[\u4E00-\u9FA5\uf900-\ufa2da-zA-Z\s]+/g,t,i=n[0].settings.label||".Validform_label";if(i=r.siblings(i).eq(0).text()||r.siblings().find(i).eq(0).text()||r.parent().siblings(i).eq(0).text()||r.parent().siblings().find(i).eq(0).text(),i=i.replace(/\s(?![a-zA-Z])/g,"").match(f),i=i?i.join(""):[""],f=/\{(.+)\|(.+)\}/,t=n.data("tipmsg").s||u.s,i!=""){if(t=t.replace(/\{0\|(.+)\}/,i),r.attr("recheck"))return t=t.replace(/\{(.+)\}/,""),r.attr("nullmsg",t),t}else t=r.is(":checkbox,:radio,select")?t.replace(/\{0\|(.+)\}/,""):t.replace(/\{0\|(.+)\}/,"$1");return t=r.is(":checkbox,:radio,select")?t.replace(f,"$2"):t.replace(f,"$1"),r.attr("nullmsg",t),t},getErrormsg:function(t,i,r){var f=i.match(/^(.+?)((\d+)-(\d+))?$/),o,s,e;if(r=="recheck")return t.data("tipmsg").reck||u.reck;if(s=n.extend({},u.w,t.data("tipmsg").w),f[0]in s)return t.data("tipmsg").w[f[0]]||u.w[f[0]];for(e in s)if(e.indexOf(f[1])!=-1&&/^(.+?)(\d+)-(\d+)$/.test(e))return o=(t.data("tipmsg").w[e]||u.w[e]).replace(/(.*?)\d+(.+?)\d+(.*)/,"$1"+f[3]+"$2"+f[4]+"$3"),t.data("tipmsg").w[f[0]]=o,o;return t.data("tipmsg").def||u.def},_regcheck:function(n,t,f,e){var e=e,s=null,o=!1,a=/\/.+\//g,p=/^(.+?)(\d+)-(\d+)$/,v=3,h,c,y,b;if(a.test(n)){var k=n.match(a)[0].slice(1,-1),w=n.replace(a,""),d=RegExp(k,w);o=d.test(t)}else if(r.util.toString.call(r.util.dataType[n])=="[object Function]")o=r.util.dataType[n](t,f,e,r.util.dataType),o===!0||o===i?o=!0:(s=o,o=!1);else{if(!(n in r.util.dataType))if(h=n.match(p),h){for(y in r.util.dataType)if((c=y.match(p),c)&&h[1]===c[1]){var l=r.util.dataType[y].toString(),w=l.match(/\/[mgi]*/g)[1].replace("/",""),g=new RegExp("\\{"+c[2]+","+c[3]+"\\}","g");l=l.replace(/\/[mgi]*/g,"/").replace(g,"{"+h[2]+","+h[3]+"}").replace(/^\//,"").replace(/\/$/,"");r.util.dataType[n]=new RegExp(l,w);break}}else o=!1,s=e.data("tipmsg").undef||u.undef;r.util.toString.call(r.util.dataType[n])=="[object RegExp]"&&(o=r.util.dataType[n].test(t))}return o?(v=2,s=f.attr("sucmsg")||e.data("tipmsg").r||u.r,f.attr("recheck")&&(b=e.find("input[name='"+f.attr("recheck")+"']:first"),t!=b.val()&&(o=!1,v=3,s=f.attr("errormsg")||r.util.getErrormsg.call(f,e,n,"recheck")))):(s=s||f.attr("errormsg")||r.util.getErrormsg.call(f,e,n),r.util.isEmpty.call(f,t)&&(s=f.attr("nullmsg")||r.util.getNullmsg.call(f,e))),{passed:o,type:v,info:s}},regcheck:function(n,t,i){var h=this,s=null,f,e,u,o;if(i.attr("ignore")==="ignore"&&r.util.isEmpty.call(i,t))return i.data("cked")&&(s=""),{passed:!0,type:4,info:s};for(i.data("cked","cked"),f=r.util.parseDatatype(n),u=0;u<f.length;u++){for(o=0;o<f[u].length;o++)if(e=r.util._regcheck(f[u][o],t,i,h),!e.passed)break;if(e.passed)break}return e},parseDatatype:function(n){var u=/\/.+?\/[mgi]*(?=(,|$|\||\s))|[\w\*-]+/g,f=n.match(u),e=n.replace(u,"").replace(/\s*/g,"").split(""),t=[],r=0,i;for(t[0]=[],t[0].push(f[0]),i=0;i<e.length;i++)e[i]=="|"&&(r++,t[r]=[]),t[r].push(f[i+1]);return t},showmsg:function(t,u,e,s){if(t!=i&&(s!="bycheck"||!e.sweep||(!e.obj||e.obj.is(".Validform_error"))&&typeof u!="function")){if(n.extend(e,{curform:this}),typeof u=="function"){u(t,e,r.util.cssctl);return}(u==1||s=="byajax"&&u!=4)&&f.find(".Validform_info").html(t);(u==1&&s!="bycheck"&&e.type!=2||s=="byajax"&&u!=4)&&(o=!1,f.find(".iframe").css("height",f.outerHeight()),f.show(),h(f,100));u==2&&e.obj&&(e.obj.parent().next().find(".Validform_checktip").html(t),r.util.cssctl(e.obj.parent().next().find(".Validform_checktip"),e.type));(u==3||u==4)&&e.obj&&(e.obj.siblings(".Validform_checktip").html(t),r.util.cssctl(e.obj.siblings(".Validform_checktip"),e.type))}},cssctl:function(n,t){switch(t){case 1:n.removeClass("Validform_right Validform_wrong").addClass("Validform_checktip Validform_loading");break;case 2:n.removeClass("Validform_wrong Validform_loading").addClass("Validform_checktip Validform_right");break;case 4:n.removeClass("Validform_right Validform_wrong Validform_loading").addClass("Validform_checktip");break;default:n.removeClass("Validform_right Validform_loading").addClass("Validform_checktip Validform_wrong")}},check:function(t,i,f){var s=t[0].settings,i=i||"",l=r.util.getValue.call(t,n(this)),a,h,v,o,c,y,p,w;if(s.ignoreHidden&&n(this).is(":hidden")||n(this).data("dataIgnore")==="dataIgnore")return!0;if(s.dragonfly&&!n(this).data("cked")&&r.util.isEmpty.call(n(this),l)&&n(this).attr("ignore")!="ignore")return!1;if(a=r.util.regcheck.call(t,n(this).attr("datatype"),l,n(this)),l==this.validform_lastval&&!n(this).attr("recheck")&&i=="")return a.passed?!0:!1;if(this.validform_lastval=l,e=h=n(this),!a.passed)return r.util.abort.call(h[0]),f||(r.util.showmsg.call(t,a.info,s.tiptype,{obj:n(this),type:a.type,sweep:s.tipSweep},"bycheck"),s.tipSweep||h.addClass("Validform_error")),!1;if(v=n(this).attr("ajaxurl"),!v||r.util.isEmpty.call(n(this),l)||f)v&&r.util.isEmpty.call(n(this),l)&&(r.util.abort.call(h[0]),h[0].validform_valid="true");else return(o=n(this),o[0].validform_subpost=i=="postform"?"postform":"",o[0].validform_valid==="posting"&&l==o[0].validform_ckvalue)?"ajax":(o[0].validform_valid="posting",o[0].validform_ckvalue=l,r.util.showmsg.call(t,t.data("tipmsg").c||u.c,s.tiptype,{obj:o,type:1,sweep:s.tipSweep},"bycheck"),r.util.abort.call(h[0]),c=n.extend(!0,{},s.ajaxurl||{}),y={type:"POST",cache:!1,url:v,data:"param="+encodeURIComponent(l)+"&name="+encodeURIComponent(n(this).attr("name")),success:function(i){n.trim(i.status)==="y"?(o[0].validform_valid="true",i.info&&o.attr("sucmsg",i.info),r.util.showmsg.call(t,o.attr("sucmsg")||t.data("tipmsg").r||u.r,s.tiptype,{obj:o,type:2,sweep:s.tipSweep},"bycheck"),h.removeClass("Validform_error"),e=null,o[0].validform_subpost=="postform"&&t.trigger("submit")):(o[0].validform_valid=i.info,r.util.showmsg.call(t,i.info,s.tiptype,{obj:o,type:3,sweep:s.tipSweep}),h.addClass("Validform_error"));h[0].validform_ajax=null},error:function(n){if(n.status=="200")return n.responseText=="y"?c.success({status:"y"}):c.success({status:"n",info:n.responseText}),!1;if(n.statusText!=="abort"){var i="status: "+n.status+"; statusText: "+n.statusText;r.util.showmsg.call(t,i,s.tiptype,{obj:o,type:3,sweep:s.tipSweep});h.addClass("Validform_error")}return o[0].validform_valid=n.statusText,h[0].validform_ajax=null,!0}},c.success&&(p=c.success,c.success=function(n){y.success(n);p(n,o)}),c.error&&(w=c.error,c.error=function(n){y.error(n)&&w(n,o)}),c=n.extend({},y,c,{dataType:"json"}),h[0].validform_ajax=n.ajax(c),"ajax");return f||(r.util.showmsg.call(t,a.info,s.tiptype,{obj:n(this),type:a.type,sweep:s.tipSweep},"bycheck"),h.removeClass("Validform_error")),e=null,!0},submitForm:function(t,i,f,o,s){var h=this,v,l,a,y,c,p,w,b,f;if(h[0].validform_status==="posting"||t.postonce&&h[0].validform_status==="posted"||(v=t.beforeCheck&&t.beforeCheck(h),v===!1))return!1;if(l=!0,h.find("[datatype]").each(function(){var o,f,s;if(i)return!1;if(t.ignoreHidden&&n(this).is(":hidden")||n(this).data("dataIgnore")==="dataIgnore")return!0;if(o=r.util.getValue.call(h,n(this)),e=f=n(this),a=r.util.regcheck.call(h,n(this).attr("datatype"),o,n(this)),!a.passed)return(r.util.showmsg.call(h,a.info,t.tiptype,{obj:n(this),type:a.type,sweep:t.tipSweep}),f.addClass("Validform_error"),!t.showAllError)?(f.focus(),l=!1,!1):(l&&(l=!1),!0);if(n(this).attr("ajaxurl")&&!r.util.isEmpty.call(n(this),o)){if(this.validform_valid!=="true")return(s=n(this),r.util.showmsg.call(h,h.data("tipmsg").v||u.v,t.tiptype,{obj:s,type:3,sweep:t.tipSweep}),f.addClass("Validform_error"),s.trigger("blur",["postform"]),!t.showAllError)?(l=!1,!1):(l&&(l=!1),!0)}else n(this).attr("ajaxurl")&&r.util.isEmpty.call(n(this),o)&&(r.util.abort.call(this),this.validform_valid="true");r.util.showmsg.call(h,a.info,t.tiptype,{obj:n(this),type:a.type,sweep:t.tipSweep});f.removeClass("Validform_error");e=null}),t.showAllError&&h.find(".Validform_error:first").focus(),l){if(y=t.beforeSubmit&&t.beforeSubmit(h),y===!1)return!1;if(h[0].validform_status="posting",t.ajaxPost||o==="ajaxPost")c=n.extend(!0,{},t.ajaxpost||{}),c.url=f||c.url||t.url||h.attr("action"),r.util.showmsg.call(h,h.data("tipmsg").p,t.tiptype,{obj:h,type:1,sweep:t.tipSweep},"byajax"),s?c.async=!1:s===!1&&(c.async=!0),c.success&&(p=c.success,c.success=function(i){t.callback&&t.callback(i);h[0].validform_ajax=null;h[0].validform_status=n.trim(i.status)==="y"?"posted":"normal";p(i,h)}),c.error&&(w=c.error,c.error=function(n){t.callback&&t.callback(n);h[0].validform_status="normal";h[0].validform_ajax=null;w(n,h)}),b={type:"POST",async:!0,data:h.serializeArray(),success:function(i){n.trim(i.status)==="y"?(h[0].validform_status="posted",r.util.showmsg.call(h,i.info,t.tiptype,{obj:h,type:2,sweep:t.tipSweep},"byajax")):(h[0].validform_status="normal",r.util.showmsg.call(h,i.info,t.tiptype,{obj:h,type:3,sweep:t.tipSweep},"byajax"));t.callback&&t.callback(i);h[0].validform_ajax=null},error:function(n){var i="status: "+n.status+"; statusText: "+n.statusText;r.util.showmsg.call(h,i,t.tiptype,{obj:h,type:3,sweep:t.tipSweep},"byajax");t.callback&&t.callback(n);h[0].validform_status="normal";h[0].validform_ajax=null}},c=n.extend({},b,c,{dataType:"json"}),h[0].validform_ajax=n.ajax(c);else return t.postonce||(h[0].validform_status="normal"),f=f||t.url,f&&h.attr("action",f),t.callback&&t.callback(h)}return!1},resetForm:function(){var n=this;n.each(function(){this.reset&&this.reset();this.validform_status="normal"});n.find(".Validform_right").text("");n.find(".passwordStrength").children().removeClass("bgStrength");n.find(".Validform_checktip").removeClass("Validform_wrong Validform_right Validform_loading");n.find(".Validform_error").removeClass("Validform_error");n.find("[datatype]").removeData("cked").removeData("dataIgnore").each(function(){this.validform_lastval=null});n.eq(0).find("input:first").focus()},abort:function(){this.validform_ajax&&this.validform_ajax.abort()}};n.Datatype=r.util.dataType;r.prototype={dataType:r.util.dataType,eq:function(t){var i=this;return t>=i.forms.length?null:(t in i.objects||(i.objects[t]=new r(n(i.forms[t]).get(),{},!0)),i.objects[t])},resetStatus:function(){var t=this;return n(t.forms).each(function(){this.validform_status="normal"}),this},setStatus:function(t){var i=this;return n(i.forms).each(function(){this.validform_status=t||"posting"}),this},getStatus:function(){var t=this;return n(t.forms)[0].validform_status},ignore:function(t){var i=this,t=t||"[datatype]";return n(i.forms).find(t).each(function(){n(this).data("dataIgnore","dataIgnore").removeClass("Validform_error")}),this},unignore:function(t){var i=this,t=t||"[datatype]";return n(i.forms).find(t).each(function(){n(this).removeData("dataIgnore")}),this},addRule:function(t){for(var e,u,f=this,t=t||[],i=0;i<t.length;i++){e=n(f.forms).find(t[i].ele);for(u in t[i])u!=="ele"&&e.attr(u,t[i][u])}return n(f.forms).each(function(){var t=n(this);r.util.enhance.call(t,this.settings.tiptype,this.settings.usePlugin,this.settings.tipSweep,"addRule")}),this},ajaxPost:function(t,i,u){var f=this;return n(f.forms).each(function(){(this.settings.tiptype==1||this.settings.tiptype==2||this.settings.tiptype==3)&&s();r.util.submitForm.call(n(f.forms[0]),this.settings,t,u,"ajaxPost",i)}),this},submitForm:function(t,u){var f=this;return n(f.forms).each(function(){var f=r.util.submitForm.call(n(this),this.settings,t,u);f===i&&(f=!0);f===!0&&this.submit()}),this},resetForm:function(){var t=this;return r.util.resetForm.call(n(t.forms)),this},abort:function(){var t=this;return n(t.forms).each(function(){r.util.abort.call(this)}),this},check:function(t,i){var i=i||"[datatype]",e=this,u=n(e.forms),f=!0;return u.find(i).each(function(){r.util.check.call(this,u,"",t)||(f=!1)}),f},config:function(t){var i=this;return t=t||{},n(i.forms).each(function(){var i=n(this);this.settings=n.extend(!0,this.settings,t);r.util.enhance.call(i,this.settings.tiptype,this.settings.usePlugin,this.settings.tipSweep)}),this}};n.fn.Validform=function(n){return new r(this,n)};n.Showmsg=function(n){s();r.util.showmsg.call(t,n,1,{})};n.Hidemsg=function(){f.hide();o=!0}})(jQuery,window);